type: object
properties:
  name:
    type: string
    description: Unique identifier representing a specific algorithm
    minLength: 1
    format: algorithm-name
  env:
    type: string
    enum:
      - nodejs
      - python
      - jvm
  algorithmImage:
    type: string
    description: image name as in the docker registry
  cpu:
    type: number
    minimum: 0
    description: algorithm cpu
  gpu:
    type: integer
    minimum: 0
    description: algorithm gpu
  mem:
    type: string
    description: algorithm memory
    format: algorithm-memory
    default: 256Mi
    example: 512Mi
  options:
    type: object
    properties:
      debug:
        type: boolean
        description: debug algorithm locally
        default: false
      pending:
        type: boolean
        description: pending algorithm
        default: false
    default: {}
  gitRepository:
    type: object
    properties:
      url:
        type: string
        description: a url for the git repository
        format: url
      commit:
        type: object
        description: commit details
        properties:
          id:
            type: string
            description: commit id
          timestamp:
            type: string
            description: commit time
          message:
            type: string
            description: commit message
        required:
          - id
      branchName:
        type: string
        default: master
        description: the branch name you wish to create a build from
      tag:
        type: string
        description: a specific tag which will trigger the build
      token:
        type: string
        description: a token which allows hkube's build system to access private repositories more information https://help.github.com/en/articles/creating-a-personal-access-token-for-the-command-line
      gitKind:
        type: string
        enum:
          - github
        default: github
    required:
      - url
  entryPoint:
    type: string
  version:
    type: string
  minHotWorkers:
    type: integer
    description: how many live algorithm instances will always run
    minimum: 0
    default: 0
  algorithmEnv:
    type: object
    description: key value environment variables for algorithm
  workerEnv:
    type: object
    description: key value environment variables for worker
  nodeSelector:
    type: object
    description: key value labels for nodes constraint
    additionalProperties:
      type: string
  type:
    type: string
    description: type of algorithm code resource
    enum:
      - Git
      - Code
      - Image
    default: "Image"
required:
  - name
